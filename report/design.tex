\section{Design}
\label{section:design}
To develop a climate and activity based outfit suggestion tool, the problem has been broken into parts.
At its core is a machine learning algorithm along with a datastore for the training data. Wrapping that is
a query system and optimistically a mobile app for training the system. Additionally, an outfit modeller and persistence
engine will be implemented. In this section, the envisioned parts of the system are presented.

\subsection{Learning Core}
Firstly, Support Vector Machine (SVM) was chosen as the machine learning method for implementing an outfit predictor.
Justification for this choice is provided in \ref{subsection:mlsvm}. Some other methods which were considered are
denoted in \ref{subsection:mloptions}. The learning core was implemented as a Node.js RESTful API to make it easy for a
Mobile App or Web UI to consume on behalf of users of Gear Smarts. The API is described below in \ref{subsection:mlapi}.

\subsubsection{Justification for SVM}
\label{subsection:mlsvm}
Support Vector Machines were chosen over alternative machine learning methods for three main reasons.

Firstly, SVMs are built for classification problems and can be configured in a number of ways (such as linear vs.
nonlinear classifying) to make it extensible to a wider variety of problems than other methods might allow. This is
ideal for GearSmarts since we are exploring the problem space as much as solving it. The flexibility of SVMs will
help us react to changing or perhaps surprising discoveries.

The second reason for using SVMs is there is already an easy-to-use Node.js implementation library, \texttt{node-svm}
\cite{Github:nodesvm}. Since the details of implementing SVM are abstracted away, all we need concern ourselves with in
the GearSmarts API is normalizing and namespacing the datasets provided by consumers.

Thirdly, the author already had experience with popular machine learning methods like Aritificial Neural Networks, and
Decision Trees. Support vector machines offer an opportunity to learn a new method and compare it to experiences with
other methods.


\subsubsection{Machine Learning RESTful API}
\label{subsction:mlapi}
In order to make Gear Smarts as extensible and usable as possible, the machine learning core was implemented in Node.js
as a RESTful server, exposing two key routes describe below.

\begin{description}
    \item{\texttt{/v1/machinelearning/:namespace/train/:classification}} asdf
    \item{\texttt{/v1/machinelearning/:namespace/classify}} asdf
\end{description}

Both routes take a \texttt{:namespace} argument, which is simply an extensibility mechanism allowing consumers to train
many distinct datasets. For example, consumers training the \texttt{candy} namespace would not affect consumers training
the \texttt{produce} namespace.

Additionally, each route expects a \texttt{POST} body containing either an Array or a key/value Object of features to
train/classify. An example interaction with a GearSmarts server is shown below, with a contrived example of training
on the \texttt{XOR} function. The idea to use XOR comes from \cite{Github:nodesvm}.

\begin{lstlisting}
#
# Train on XOR
#

# [0,0] => 0
curl `http://localhost:8080/v1/ml/xor/train/0' \
    -H `Content-Type: application/json' \
    --data-binary `[0,0]'

# [1,1] => 0
curl `http://localhost:8080/v1/ml/xor/train/0' \
    -H `Content-Type: application/json' \
    --data-binary `[1,1]'

# [0,1] => 1
curl `http://localhost:8080/v1/ml/xor/train/1' \
    -H `Content-Type: application/json' \
    --data-binary `[0,1]'

#[1,0] => 1
curl `http://localhost:8080/v1/ml/xor/train/1' \
    -H `Content-Type: application/json' \
    --data-binary `[1,0]'


#
# Classify
#

# [1,0] => ?
curl `http://localhost:8080/v1/ml/xor/classify' \
    -H `Content-Type: application/json' \
    --data-binary `[1,0]'
# Server's response ==> "1"
\end{lstlisting}


\subsubsection{Machine Learning Methods}
\label{subsection:mloptions}
Existing articles should give insight into which technique is
most appropriate for Gear Smarts. Some options are listed below:

\begin{description}
  \item{Support Vector Machine:} Non-linear classification using the ``kernel trick.'' A short-coming is solving for multiple
  classes can add complexity, as a common technique is to use multiple binary SVM classifiers. While this can be worked with
  for Gear Smarts, it has the potential to be limiting.
  \item{kNN:} Can help to simplify a problem in the absence of a good model of the larger application
  \item{Decision tree:} Again, this is a relatively simple implementation that replaces modeling with basic relationships
  \item{Bayesian network:} Takes a statistical approach to modeling data
  \item{Artificial Neural Network:} These can adapt to a huge variety of problems, and are interesting in that they emulate
  human (and animal) learning. A major down-side is they can be complex and costly to implement.
  \item{Others:} There are many many other machine learning techniques that could also be investigated.
\end{description}

\subsection{Problem Modeling}
Before using a machine learning system, the problem must be modeled properly. It can be broken down into three fundamental parts,
described below.

\begin{description}
  \item{Outfit:} Outfits can either be modeled individually or as a summation of individual articles (potentially introducing
  a knapsack problem \footnote{The knapsack problem seeks to optimize a value by searching combinations of a set. In Gear Smarts,
  we might represent an outfit with a KPI that should closely match a KPI produced by a function of the weather. Meanwhile, each
  article of clothing in a wardrobe could have a KPI suggesting how warm it is. To properly match the knapsack problem, we might
  introduce a mobility metric for each article.}). Additionally, they can be represented categorically (e.g. vest or full-zip and
  fleece, down, and cotton) or by derived characteristics (e.g. thermal retention, mobility, wind-resistance).
  \item{Weather:} Weather should likely be characterized in terms of temperature, humidity, wind, pressure,
  cloud cover, and precipitation.
  \item{Comfort:} Intuitively, there are three basic comfort levels relevant to Gear Smart: too cold, comfortable, and too hot.
\end{description}

\subsection{User Interface}
A simple way to enable user interaction would be to expose the machine learning system via a RESTful API and consume it
through a mobile app. The interface on the app would simply ask the user what their outfit was that day, and how comfortable
they were. Under the hood, the app would record the user's geolocation and query some service for weather information
about that location on that day. Then it would convert that data into a representative feature set with which to send
the machine learning API for training.

Later, the user could use the app to ask the question ``what should I wear today?'' Using the trained data, the app can
suggest which outfit to wear. Something to determine is whether or not to burden the user with managing
their wardrobe in the system, allowing the system to more usefully suggest outfits. The alternative is to hope the
learning mechanism would adapt to which items each user has based on their feedback.
